<link rel="import" href="/bower_components/polymer/polymer.html">
<link rel="import" href="/bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="/bower_components/paper-button/paper-button.html">
<link rel="import" href="/bower_components/iron-list/iron-list.html">
<link rel="import" href="shared-styles.html">
<link rel="import" href="/bower_components/iron-icons/iron-icons.html">

<link rel="import" href="/bower_components/paper-card/paper-card.html">
<link rel="import" href="/bower_components/paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="/bower_components/paper-header-panel/paper-header-panel.html">
<link rel="import" href="/bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="/bower_components/paper-item/paper-item.html">
<link rel="import" href="/bower_components/paper-menu/paper-menu.html">
<link rel="import" href="/bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="/bower_components/paper-slider/paper-slider.html">
<link rel="import" href="/bower_components/paper-input-tags/paper-input-tags.html">
<link rel="import" href="/bower_components/paper-textarea-tags/paper-textarea-tags.html">

<dom-module id="wine-price-entry" price=[[price]]>
	<template>
			<div class="card-contents">
				<h3>[[price.brandname]]</h3>
					[[price.brandname]]<br/>
					[[price.type]]<br/>
					[[price.color]]<br/>
					[[price.country]]<br/>
					[[price.varietal]]<br/>
					[[price.otherdesignation]]<br/>
			</div>
	</template>

		<script>
		 (function() {
				 Polymer({
						 is: 'wine-price-entry',
						 properties: {
						 }
				 });
		 }());
	</script>

</dom-module>

<dom-module id="wine-prices">
	<template>
		<style include="shared-styles">
		:host {
			display: block;
			}

			.nav {
			border-right: 1px solid #ccc;
			}

			.list-panel {
			background-color: #fafafa;
			}

			.list-panel {
			--paper-header-panel-standard-container: {
				border-right: 1px solid #ccc;
			};
			}

			paper-toolbar {
			background-color:white;
			box-shadow: none;
			}

			.list {
			padding: 0;
			}

			.list paper-item {
			height: 80px;
			border-bottom: 1px solid #dedede;
			background-color: #fafafa;
			}

			.main-drawer-panel:not([narrow]) [list-toggle] {
			display: none;
			}

			.content {
			height: 3000px;
			}

			.container {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      }

			paper-card {
      margin: 16px;
      }
		</style>

		<iron-ajax
			 id="getWinePriceData"
			 auto
			 url="[[url]]?__offset={{offset}}&__count=[[count]]"
			 method="get"
			 handle-as="json"
			 last-response="{{price}}"></iron-ajax>

			 <paper-drawer-panel id="mainDrawerPanel" class="main-drawer-panel" main responsive-width="600px"
	 				drawer-width="[[_computeListWidth(_isMobile)]]" drawer-toggle-attribute="list-toggle"
	 				narrow="{{_isMobile}}">

	 			<paper-header-panel class="list-panel" drawer>

	 				<!-- List Toolbar -->
	 				<paper-toolbar>
	 					<paper-icon-button icon="menu" paper-drawer-toggle></paper-icon-button>
						<h1>Refine your search</h1>
	 				</paper-toolbar>

	 				<!-- List -->
	 				<paper-menu class="list" on-iron-activate="_listTap">
						<h3>Region</h3>
						<tag-item value="French"></tag-item>
						<tag-item value="American"></tag-item>
						<tag-item value="Rhone"></tag-item>
						<tag-item value="Moselle"></tag-item>
						<tag-item value="Italian"></tag-item>
						<h3>Type</h3>
						<tag-item value="Red"></tag-item>
						<tag-item value="White"></tag-item>
						<tag-item value="Vouvray-Anjou-Saumur"></tag-item>
						<h3>Vintage</h3>
						<paper-slider value="50"></paper-slider>
						<h3>Year Sold</h3>
						<paper-slider value="50"></paper-slider>
						<h3>Size</h3>
						<tag-item value="Bottle"></tag-item>
						<tag-item value="Case"></tag-item>
						<tag-item value="Magnum"></tag-item>
	 				</paper-menu>

	 			</paper-header-panel>

	 			<paper-header-panel class="content-panel" main>

	 				<!-- Main Toolbar -->
	 				<paper-toolbar>
	 					<paper-icon-button icon="arrow-back" list-toggle></paper-icon-button>
						<h1>Results</h1>
	 				</paper-toolbar>

	 				<!-- Main Content -->
	 				<div class="content container">
						<paper-card heading="1945 Chateauneuf du Pape">
		          <div class="card-content">Catalogue price card</div>
		          <div class="card-actions">
		          </div>
		        </paper-card>
					</div>

	 			</paper-header-panel>

	 		</paper-drawer-panel>

	</template>

	<script>
	(function() {
		 Polymer({
				 is: 'wine-prices',

			properties: {
        url: {
             type: "text",
             value: "http://labelthis.qjhart.org/v1/wine_prices",
             reflectToAttribute: true
        },
        count: {
             type: "integer",
             value: 35,
             reflectToAttribute: true
        },
        offset: {
             type: "integer",
             value: 5,
             reflectToAttribute: true
        }
			},

					getQuote: function() {
							this.offset=Math.ceil(Math.random()*100);
//							this.$.getWinePriceData.generateRequest();
				}
			});
		}());
	</script>
</dom-module>
