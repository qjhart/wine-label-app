<link rel="import" href="../bower_components/app-route/app-route.html">
<link rel="import" href="../bower_components/paper-spinner/paper-spinner.html">

<link rel="import" href="wine-catalogs-list.html">

<dom-module id="wine-catalogs">

  <template>

    <style>
      :host {
        display: block;
        height: 100%;
        position: relative;
      }

      .overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background: #FFF;
      }
    </style>

    <app-route route="{{route}}"
               pattern="/list"
               active="{{listActive}}"></app-route>

    <app-route route="{{route}}"
               pattern="/catalog/:slug"
               active="{{postsActive}}"
               data="{{postsData}}"></app-route>

    <wine-catalogs-list
        active={{listActive}}
        api="[[api]]"
        loading="{{isLoading}}"></wine-catalogs-list>

    <!-- <wine-catalog-label
         api="[[api]]"
         wine-catalog-id="{{postsData.slug}}"
         active="{{postsActive}}"
         loading="{{isLoading}}">
         </wine-catalog-label> -->

    <div class="overlay" hidden$="[[!isLoading]]">
      <paper-spinner active="[[isLoading]]"></paper-spinner>
    </div>

  </template>

  <script>
    Polymer({

      is: 'wine-catalogs',
      properties: {
				api: {
					type: "text",
					reflectToAttribute: true
				},
      },

      observers: [
        '_lockScroll(isLoading)'
      ],

      _lockScroll: function(isLoading) {
        if (isLoading) {
          document.body.style.overflow = 'hidden';
        } else {
          document.body.style.overflow = 'visible';
        }
      }

    });
  </script>

</dom-module>
